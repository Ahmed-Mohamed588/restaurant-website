<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Details - Chickenza</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="script.js"></script>
    <style>
        .detail-container {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--dark-secondary) 100%);
            padding-top: 100px;
            padding-bottom: 60px;
        }

        .detail-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .back-navigation {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 40px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
        }

        .back-navigation:hover {
            color: var(--secondary-color);
            text-shadow: var(--neon-glow-cyan);
        }

        .detail-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: start;
        }

        .detail-image-section {
            position: relative;
        }

        .main-image-container {
            position: relative;
            border-radius: 24px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            margin-bottom: 24px;
        }

        .main-image {
            width: 100%;
            height: 500px;
            object-fit: cover;
            transition: var(--transition);
        }

        .main-image-container:hover .main-image {
            transform: scale(1.05);
        }

        .image-badge {
            position: absolute;
            top: 24px;
            right: 24px;
            background: var(--accent-color);
            color: var(--dark-bg);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .image-badge.spicy {
            background: #ff4444;
            color: white;
        }

        .image-badge.vegetarian {
            background: #44ff44;
            color: var(--dark-bg);
        }

        .image-badge.popular {
            background: var(--primary-color);
            color: white;
        }

        .image-gallery {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .gallery-item {
            aspect-ratio: 1;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.05);
        }

        .gallery-item:hover,
        .gallery-item.active {
            border-color: var(--secondary-color);
            transform: scale(1.05);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        .detail-info-section {
            padding: 20px 0;
        }

        .detail-header {
            margin-bottom: 32px;
        }

        .detail-title {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .detail-rating {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .stars {
            display: flex;
            gap: 4px;
            color: var(--accent-color);
        }

        .rating-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .detail-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 24px;
        }

        .detail-description {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 1.1rem;
            margin-bottom: 40px;
        }

        .ingredients-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .ingredients-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .ingredient-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: var(--transition);
        }

        .ingredient-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--secondary-color);
            transform: translateY(-2px);
        }

        .ingredient-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9rem;
        }

        .ingredient-name {
            color: var(--text-primary);
            font-weight: 500;
        }

        .nutrition-section {
            margin-bottom: 40px;
        }

        .nutrition-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 16px;
        }

        .nutrition-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: var(--transition);
        }

        .nutrition-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }

        .nutrition-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 8px;
        }

        .nutrition-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .customization-section {
            margin-bottom: 40px;
        }

        .customization-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .customization-group {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 24px;
        }

        .customization-title {
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .option-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            transition: var(--transition);
        }

        .option-item:hover {
            background: rgba(255, 255, 255, 0.06);
        }

        .option-label {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .option-checkbox {
            width: 20px;
            height: 20px;
            accent-color: var(--primary-color);
        }

        .option-name {
            color: var(--text-primary);
        }

        .option-price {
            color: var(--secondary-color);
            font-weight: 600;
        }

        .quantity-section {
            margin-bottom: 40px;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px 24px;
            max-width: 200px;
        }

        .quantity-btn {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: transparent;
            color: var(--text-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.2rem;
        }

        .quantity-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .quantity-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            min-width: 40px;
            text-align: center;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
        }

        .add-to-cart-btn {
            flex: 1;
            padding: 20px 32px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .add-to-cart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 0, 110, 0.3);
        }

        .buy-now-btn {
            padding: 20px 32px;
            background: transparent;
            color: var(--secondary-color);
            border: 2px solid var(--secondary-color);
            border-radius: 16px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .buy-now-btn:hover {
            background: var(--secondary-color);
            color: var(--dark-bg);
            box-shadow: var(--neon-glow-cyan);
        }

        .reviews-section {
            margin-top: 60px;
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .reviews-list {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .review-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            transition: var(--transition);
        }

        .review-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--primary-color);
        }

        .review-header-info {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 16px;
        }

        .reviewer-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .reviewer-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .reviewer-details {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .reviewer-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .review-date {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .review-rating-stars {
            color: var(--accent-color);
        }

        .review-text {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .detail-content {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .detail-title {
                font-size: 2rem;
            }

            .detail-price {
                font-size: 2rem;
            }

            .main-image {
                height: 300px;
            }

            .image-gallery {
                grid-template-columns: repeat(3, 1fr);
            }

            .ingredients-grid {
                grid-template-columns: 1fr;
            }

            .nutrition-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-3d">
                    <i class="fas fa-utensils"></i>
                    <span>Chickenza</span>
                </div>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="menu.html" class="nav-link">Menu</a>
                <a href="#orders" class="nav-link">Orders</a>
                <a href="#profile" class="nav-link">Profile</a>
            </div>
            <div class="nav-actions">
                <button class="cart-btn" onclick="window.location.href='menu.html'">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </button>
                <a href="index.html" class="login-btn">Logout</a>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Detail Container -->
    <div class="detail-container">
        <div class="detail-wrapper">
            <!-- Back Navigation -->
            <a href="menu.html" class="back-navigation">
                <i class="fas fa-arrow-left"></i>
                <span>Back to Menu</span>
            </a>

            <!-- Detail Content -->
            <div class="detail-content">
                <!-- Image Section -->
                <div class="detail-image-section">
                    <div class="main-image-container">
                        <img id="main-image" class="main-image" src="" alt="">
                        <div id="image-badge" class="image-badge">
                            <i class="fas fa-star"></i>
                            <span>Popular</span>
                        </div>
                    </div>
                    <div class="image-gallery">
                        <div class="gallery-item active" onclick="changeImage(0)">
                            <img src="" alt="">
                        </div>
                        <div class="gallery-item" onclick="changeImage(1)">
                            <img src="" alt="">
                        </div>
                        <div class="gallery-item" onclick="changeImage(2)">
                            <img src="" alt="">
                        </div>
                        <div class="gallery-item" onclick="changeImage(3)">
                            <img src="" alt="">
                        </div>
                    </div>
                </div>

                <!-- Info Section -->
                <div class="detail-info-section">
                    <div class="detail-header">
                        <h1 id="item-title" class="detail-title">Loading...</h1>
                        <div class="detail-rating">
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <span class="rating-text">4.8 (324 reviews)</span>
                        </div>
                        <div id="item-price" class="detail-price">$0.00</div>
                        <div id="extras-summary" class="extras-summary" style="display: none;">
                            <small>Includes: <span id="extras-list"></span></small>
                        </div>
                    </div>

                    <p id="item-description" class="detail-description">Loading description...</p>

                    <!-- Ingredients Section -->
                    <div class="ingredients-section">
                        <h3 class="section-title">Ingredients</h3>
                        <div id="ingredients-grid" class="ingredients-grid">
                            <!-- Ingredients will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Nutrition Section -->
                    <div class="nutrition-section">
                        <h3 class="section-title">Nutrition Information</h3>
                        <div class="nutrition-grid">
                            <div class="nutrition-item">
                                <div class="nutrition-value">450</div>
                                <div class="nutrition-label">Calories</div>
                            </div>
                            <div class="nutrition-item">
                                <div class="nutrition-value">28g</div>
                                <div class="nutrition-label">Protein</div>
                            </div>
                            <div class="nutrition-item">
                                <div class="nutrition-value">35g</div>
                                <div class="nutrition-label">Carbs</div>
                            </div>
                            <div class="nutrition-item">
                                <div class="nutrition-value">18g</div>
                                <div class="nutrition-label">Fat</div>
                            </div>
                        </div>
                    </div>

                    <!-- Customization Section -->
                    <div class="customization-section">
                        <h3 class="section-title">Customize Your Order</h3>
                        <div class="customization-options">
                            <div class="customization-group">
                                <h4 class="customization-title">Extra Toppings</h4>
                                <div class="option-list">
                                    <div class="option-item">
                                        <div class="option-label">
                                            <input type="checkbox" class="option-checkbox" data-name="Extra Cheese" data-price="2.00" onchange="updatePrice()">
                                            <span class="option-name">Extra Cheese</span>
                                        </div>
                                        <span class="option-price">+$2.00</span>
                                    </div>
                                    <div class="option-item">
                                        <div class="option-label">
                                            <input type="checkbox" class="option-checkbox" data-name="Extra Sauce" data-price="1.00" onchange="updatePrice()">
                                            <span class="option-name">Extra Sauce</span>
                                        </div>
                                        <span class="option-price">+$1.00</span>
                                    </div>
                                    <div class="option-item">
                                        <div class="option-label">
                                            <input type="checkbox" class="option-checkbox" data-name="Double Portion" data-price="5.00" onchange="updatePrice()">
                                            <span class="option-name">Double Portion</span>
                                        </div>
                                        <span class="option-price">+$5.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quantity Section -->
                    <div class="quantity-section">
                        <h3 class="section-title">Quantity</h3>
                        <div class="quantity-selector">
                            <button class="quantity-btn" onclick="updateQuantity(-1)">-</button>
                            <div class="quantity-value" id="quantity">1</div>
                            <button class="quantity-btn" onclick="updateQuantity(1)">+</button>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button class="add-to-cart-btn" onclick="addToCart()">
                            <i class="fas fa-shopping-cart"></i>
                            <span>Add to Cart</span>
                        </button>
                        <button class="buy-now-btn" onclick="buyNow()">
                            <i class="fas fa-bolt"></i>
                            <span>Buy Now</span>
                        </button>
                    </div>

                    <!-- Reviews Section -->
                    <div class="reviews-section">
                        <h3 class="section-title">Customer Reviews</h3>
                        <div class="reviews-list">
                            <div class="review-item">
                                <div class="review-header-info">
                                    <div class="reviewer-info">
                                        <div class="reviewer-avatar">JD</div>
                                        <div class="reviewer-details">
                                            <div class="reviewer-name">John Doe</div>
                                            <div class="review-date">2 days ago</div>
                                        </div>
                                    </div>
                                    <div class="review-rating-stars">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                </div>
                                <p class="review-text">Absolutely amazing! The quality exceeded my expectations. Fresh ingredients and perfect presentation. Will definitely order again!</p>
                            </div>
                            <div class="review-item">
                                <div class="review-header-info">
                                    <div class="reviewer-info">
                                        <div class="reviewer-avatar">SM</div>
                                        <div class="reviewer-details">
                                            <div class="reviewer-name">Sarah Miller</div>
                                            <div class="review-date">1 week ago</div>
                                        </div>
                                    </div>
                                    <div class="review-rating-stars">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                </div>
                                <p class="review-text">Great taste and good portion size. The delivery was fast and the food was still hot. Highly recommend!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentItem = {};
        let quantity = 1;
        let currentImageIndex = 0;

        // Load item data
        function loadItemData() {
            const itemData = localStorage.getItem('selectedItem');
            if (itemData) {
                currentItem = JSON.parse(itemData);
                populateItemDetails(currentItem);
            } else {
                // If no item data, redirect to menu
                window.location.href = 'menu.html';
            }
        }

        // Populate item details
        function populateItemDetails(item) {
            // Update basic info
            document.getElementById('item-title').textContent = item.name;
            document.getElementById('item-price').textContent = `$${item.price}`;
            document.getElementById('item-description').textContent = item.description;

            // Update main image with actual product image
            const mainImage = document.getElementById('main-image');
            mainImage.src = item.image;
            mainImage.onerror = function() {
                this.src = `https://picsum.photos/seed/${item.name}/600/500`;
            };

            // Update gallery images with actual product images from folders
            const galleryImages = document.querySelectorAll('.gallery-item img');
            let imageVariations = [];

            // Determine the correct folder based on item name
            let folderName = '';
            if (item.name === 'Margherita Classic') {
                folderName = 'Margherita Classic_item details';
                imageVariations = [
                    `${folderName}/Margherita Classic-item1.jpg`,
                    `${folderName}/Margherita Classic-item2.jpg`,
                    `${folderName}/Margherita Classic-item3.jpg`,
                    `${folderName}/Margherita Classic-item4.jpg`
                ];
            } else if (item.name === 'Pepperoni Feast') {
                folderName = 'Pepperoni Feast_item details';
                imageVariations = [
                    `${folderName}/Pepperoni Feast-item1.jpg`,
                    `${folderName}/Pepperoni Feast-item2.jpg`,
                    `${folderName}/Pepperoni Feast-item3.jpg`,
                    `${folderName}/Pepperoni Feast-item4.jpg`
                ];
            } else {
                // Fallback to generated images for other items
                imageVariations = [
                    item.image,
                    `https://picsum.photos/seed/${item.name}-detail1/150/150`,
                    `https://picsum.photos/seed/${item.name}-detail2/150/150`,
                    `https://picsum.photos/seed/${item.name}-detail3/150/150`
                ];
            }

            galleryImages.forEach((img, index) => {
                img.src = imageVariations[index];
                img.onerror = function() {
                    this.src = `https://picsum.photos/seed/${item.name}${index}/150/150`;
                };
            });

            // Update badge
            const badge = document.getElementById('image-badge');
            if (item.badge) {
                badge.className = `image-badge ${item.badge}`;
                badge.innerHTML = `
                    ${item.badge === 'spicy' ? '<i class="fas fa-pepper-hot"></i>' : ''}
                    ${item.badge === 'vegetarian' ? '<i class="fas fa-leaf"></i>' : ''}
                    ${item.badge === 'popular' ? '<i class="fas fa-star"></i>' : ''}
                    <span>${item.badge}</span>
                `;
            } else {
                badge.style.display = 'none';
            }

            // Update ingredients
            const ingredientsGrid = document.getElementById('ingredients-grid');
            ingredientsGrid.innerHTML = item.ingredients.map(ingredient => `
                <div class="ingredient-card">
                    <div class="ingredient-icon">
                        <i class="fas fa-check"></i>
                    </div>
                    <div class="ingredient-name">${ingredient}</div>
                </div>
            `).join('');
            
            // Update price after populating item details
            updatePrice();
        }

        // Change main image
        function changeImage(index) {
            currentImageIndex = index;
            const mainImage = document.getElementById('main-image');
            const item = currentItem;
            
            // Array of image variations based on item name
            let imageVariations = [];
            
            if (item.name === 'Margherita Classic') {
                const folderName = 'Margherita Classic_item details';
                imageVariations = [
                    `${folderName}/Margherita Classic-item1.jpg`,
                    `${folderName}/Margherita Classic-item2.jpg`,
                    `${folderName}/Margherita Classic-item3.jpg`,
                    `${folderName}/Margherita Classic-item4.jpg`
                ];
            } else if (item.name === 'Pepperoni Feast') {
                const folderName = 'Pepperoni Feast_item details';
                imageVariations = [
                    `${folderName}/Pepperoni Feast-item1.jpg`,
                    `${folderName}/Pepperoni Feast-item2.jpg`,
                    `${folderName}/Pepperoni Feast-item3.jpg`,
                    `${folderName}/Pepperoni Feast-item4.jpg`
                ];
            } else {
                // Fallback to generated images for other items
                imageVariations = [
                    item.image,
                    `https://picsum.photos/seed/${item.name}-detail1/600/500`,
                    `https://picsum.photos/seed/${item.name}-detail2/600/500`,
                    `https://picsum.photos/seed/${item.name}-detail3/600/500`
                ];
            }
            
            mainImage.src = imageVariations[index];
            mainImage.onerror = function() {
                this.src = `https://picsum.photos/seed/${item.name}${index}/600/500`;
            };

            // Update active gallery item
            document.querySelectorAll('.gallery-item').forEach((item, i) => {
                item.classList.toggle('active', i === index);
            });
        }

        // Update quantity
        function updateQuantity(change) {
            quantity = Math.max(1, quantity + change);
            document.getElementById('quantity').textContent = quantity;
            updatePrice();
        }

        // Update price based on extras and quantity
        function updatePrice() {
            if (!currentItem) return;
            
            let extrasPrice = 0;
            const selectedExtras = [];
            
            // Calculate extras price
            document.querySelectorAll('.option-checkbox:checked').forEach(checkbox => {
                const price = parseFloat(checkbox.dataset.price);
                const name = checkbox.dataset.name;
                extrasPrice += price;
                selectedExtras.push(name);
            });
            
            // Calculate total price
            const basePrice = parseFloat(currentItem.price);
            const totalPrice = (basePrice + extrasPrice) * quantity;
            
            // Update price display
            document.getElementById('item-price').textContent = `$${totalPrice.toFixed(2)}`;
            
            // Update extras summary
            const extrasSummary = document.getElementById('extras-summary');
            const extrasList = document.getElementById('extras-list');
            
            if (selectedExtras.length > 0) {
                extrasList.textContent = selectedExtras.join(', ');
                extrasSummary.style.display = 'block';
            } else {
                extrasSummary.style.display = 'none';
            }
        }

        // Add to cart
        function addToCart() {
            // Get selected extras
            const selectedExtras = [];
            let extrasPrice = 0;
            
            document.querySelectorAll('.option-checkbox:checked').forEach(checkbox => {
                const price = parseFloat(checkbox.dataset.price);
                const name = checkbox.dataset.name;
                extrasPrice += price;
                selectedExtras.push({ name, price });
            });
            
            // Get existing cart from localStorage
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            
            // Check if item with same extras already exists
            const existingItemIndex = cart.findIndex(cartItem => {
                if (cartItem.id !== currentItem.id) return false;
                if (!cartItem.extras && selectedExtras.length === 0) return true;
                if (!cartItem.extras || !selectedExtras.length) return false;
                
                const cartExtrasNames = cartItem.extras.map(e => e.name).sort();
                const selectedExtrasNames = selectedExtras.map(e => e.name).sort();
                return JSON.stringify(cartExtrasNames) === JSON.stringify(selectedExtrasNames);
            });
            
            if (existingItemIndex !== -1) {
                // Update existing item
                cart[existingItemIndex].quantity += quantity;
            } else {
                // Add new item with extras
                cart.push({
                    ...currentItem,
                    quantity: quantity,
                    extras: selectedExtras,
                    basePrice: parseFloat(currentItem.price),
                    extrasPrice: extrasPrice,
                    totalPrice: (parseFloat(currentItem.price) + extrasPrice) * quantity
                });
            }

            // Save cart to localStorage
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Update cart count
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartCountElements = document.querySelectorAll('.cart-count');
            cartCountElements.forEach(element => {
                element.textContent = totalItems;
            });
            
            showNotification(`${currentItem.name} added to cart!`);
            
            // Update cart UI if on menu page
            if (typeof updateCartUI === 'function') {
                updateCartUI();
            }
        }

        // Buy now
        function buyNow() {
            addToCart();
            setTimeout(() => {
                window.location.href = 'checkout.html';
            }, 1000);
        }

        // Update cart count
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartCountElements = document.querySelectorAll('.cart-count');
            cartCountElements.forEach(element => {
                element.textContent = totalItems;
            });
        }

        // Show notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(255, 0, 110, 0.3);
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Add animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadItemData();
            updateCartCount();
        });
    </script>
</body>
</html>
