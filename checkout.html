<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Chickenza</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="script.js"></script>
    <style>
        .checkout-container {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--dark-secondary) 100%);
            padding-top: 100px;
            padding-bottom: 60px;
        }

        .checkout-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .checkout-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .checkout-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 16px;
        }

        .checkout-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .checkout-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 40px;
        }

        .checkout-form-section {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .form-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 32px;
            backdrop-filter: blur(10px);
        }

        .form-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 24px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .form-title i {
            color: var(--primary-color);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-actions {
            margin-top: 20px;
            text-align: center;
        }

        .form-actions .btn {
            min-width: 200px;
            padding: 12px 24px;
            font-weight: 600;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .form-actions .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 0, 110, 0.3);
        }

        .form-label {
            color: var(--text-primary);
            font-weight: 500;
            font-size: 0.95rem;
        }

        .form-input {
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 20px rgba(255, 0, 110, 0.2);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .payment-method {
            padding: 16px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            color: var(--text-primary);
        }

        .payment-method:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: var(--primary-color);
        }

        .payment-method.selected {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        .payment-method i {
            font-size: 1.5rem;
            margin-bottom: 8px;
            display: block;
        }

        .delivery-options {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .delivery-option {
            padding: 20px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .delivery-option:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: var(--primary-color);
        }

        .delivery-option.selected {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        .delivery-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .delivery-icon {
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .delivery-details h4 {
            margin-bottom: 4px;
        }

        .delivery-details p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .delivery-price {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .order-summary {
            position: sticky;
            top: 120px;
        }

        .summary-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 32px;
            backdrop-filter: blur(10px);
        }

        .summary-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 24px;
            color: var(--text-primary);
        }

        .cart-items {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 24px;
            max-height: 300px;
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            gap: 16px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            transition: var(--transition);
        }

        .cart-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }

        .cart-item-details {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .cart-item-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .cart-item-quantity {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .cart-item-price {
            font-weight: 600;
            color: var(--secondary-color);
        }

        .summary-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 24px 0;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .summary-label {
            color: var(--text-secondary);
        }

        .summary-value {
            font-weight: 600;
            color: var(--text-primary);
        }

        .summary-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 2px solid rgba(255, 255, 255, 0.1);
            margin-top: 16px;
        }

        .total-label {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .total-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--secondary-color);
        }

        .promo-section {
            margin-bottom: 24px;
        }

        .promo-input-group {
            display: flex;
            gap: 12px;
        }

        .promo-input {
            flex: 1;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: var(--text-primary);
            transition: var(--transition);
        }

        .promo-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .promo-btn {
            padding: 12px 24px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .promo-btn:hover {
            background: var(--accent-color);
            transform: translateY(-2px);
        }

        .place-order-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .place-order-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 0, 110, 0.3);
        }

        .order-timeline {
            margin-top: 32px;
            padding: 24px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .timeline-title {
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .timeline-item {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
            opacity: 0.5;
            transition: var(--transition);
        }

        .timeline-item.active {
            opacity: 1;
        }

        .timeline-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .timeline-item.active .timeline-icon {
            background: var(--primary-color);
            color: white;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-label {
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .timeline-time {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        @media (max-width: 1024px) {
            .checkout-content {
                grid-template-columns: 1fr;
            }

            .order-summary {
                position: static;
            }
        }

        @media (max-width: 768px) {
            .checkout-title {
                font-size: 2rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .payment-methods {
                grid-template-columns: repeat(2, 1fr);
            }

            .delivery-option {
                flex-direction: column;
                text-align: center;
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-3d">
                    <i class="fas fa-utensils"></i>
                    <span>Chickenza</span>
                </div>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="menu.html" class="nav-link">Menu</a>
                <a href="#orders" class="nav-link">Orders</a>
                <a href="#profile" class="nav-link">Profile</a>
            </div>
            <div class="nav-actions">
                <button class="cart-btn">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </button>
                <a href="index.html" class="login-btn">Logout</a>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Checkout Container -->
    <div class="checkout-container">
        <div class="checkout-wrapper">
            <!-- Header -->
            <div class="checkout-header">
                <h1 class="checkout-title">Secure Checkout</h1>
                <p class="checkout-subtitle">Complete your order in just a few steps</p>
            </div>

            <!-- Checkout Content -->
            <div class="checkout-content">
                <!-- Form Section -->
                <div class="checkout-form-section">
                    <!-- Delivery Information -->
                    <div class="form-card">
                        <h2 class="form-title">
                            <i class="fas fa-truck"></i>
                            Delivery Information
                        </h2>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">First Name</label>
                                <input type="text" class="form-input" placeholder="John" value="John">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Last Name</label>
                                <input type="text" class="form-input" placeholder="Doe" value="Doe">
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label">Email Address</label>
                                <input type="email" class="form-input" placeholder="john@example.com" value="john@example.com">
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label">Phone Number</label>
                                <input type="tel" class="form-input" placeholder="+1 (555) 123-4567" value="+1 (555) 123-4567">
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label">Delivery Address</label>
                                <input type="text" class="form-input" placeholder="123 Main St, Apt 4B" value="123 Main St, Apt 4B">
                            </div>
                            <div class="form-group">
                                <label class="form-label">City</label>
                                <input type="text" class="form-input" placeholder="New York" value="New York">
                            </div>
                            <div class="form-group">
                                <label class="form-label">ZIP Code</label>
                                <input type="text" class="form-input" placeholder="10001" value="10001">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-primary" onclick="confirmDeliveryInfo()">
                                <i class="fas fa-check"></i>
                                Confirm Delivery Information
                            </button>
                        </div>
                    </div>

                    <!-- Delivery Options -->
                    <div class="form-card">
                        <h2 class="form-title">
                                                        

                            <i class="fas fa-clock"></i>
                               Delivery Options

                        </h2>
                        <div class="delivery-options">
                            <div class="delivery-option selected" onclick="selectDelivery(this, 'standard')">
                                <div class="delivery-info">
                                    <div class="delivery-icon">
                                        <i class="fas fa-truck"></i>
                                    </div>
                                    <div class="delivery-details">
                                        <h4>Standard Delivery</h4>
                                        <p>30-45 minutes</p>
                                    </div>
                                </div>
                                <div class="delivery-price">$2.99</div>
                            </div>
                            <div class="delivery-option" onclick="selectDelivery(this, 'express')">
                                <div class="delivery-info">
                                    <div class="delivery-icon">
                                        <i class="fas fa-bolt"></i>
                                    </div>
                                    <div class="delivery-details">
                                        <h4>Express Delivery</h4>
                                        <p>15-20 minutes</p>
                                    </div>
                                </div>
                                <div class="delivery-price">$5.99</div>
                            </div>
                            <div class="delivery-option" onclick="selectDelivery(this, 'pickup')">
                                <div class="delivery-info">
                                    <div class="delivery-icon">
                                        <i class="fas fa-store"></i>
                                    </div>
                                    <div class="delivery-details">
                                        <h4>Store Pickup</h4>
                                        <p>10-15 minutes</p>
                                    </div>
                                </div>
                                <div class="delivery-price">Free</div>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-primary" onclick="confirmDeliveryOption()">
                                <i class="fas fa-check"></i>
                                Confirm Delivery Option
                            </button>
                        </div>
                    </div>

                    <!-- Payment Method -->
                    <div class="form-card">
                        <h2 class="form-title">
                            <i class="fas fa-credit-card"></i>
                            Payment Method
                        </h2>
                        <div class="payment-methods">
                            <div class="payment-method selected" onclick="selectPayment(this, 'card')">
                                <i class="fas fa-credit-card"></i>
                                <span>Card</span>
                            </div>
                            <div class="payment-method" onclick="selectPayment(this, 'paypal')">
                                <i class="fab fa-paypal"></i>
                                <span>PayPal</span>
                            </div>
                            <div class="payment-method" onclick="selectPayment(this, 'apple')">
                                <i class="fab fa-apple"></i>
                                <span>Apple Pay</span>
                            </div>
                            <div class="payment-method" onclick="selectPayment(this, 'google')">
                                <i class="fab fa-google"></i>
                                <span>Google Pay</span>
                            </div>
                        </div>
                        
                        <!-- Dynamic Payment Form Fields -->
                        <div id="payment-form-fields">
                            <!-- Card Payment Fields (Default) -->
                            <div id="card-fields" class="payment-fields">
                                <div class="form-grid">
                                    <div class="form-group full-width">
                                        <label class="form-label">Card Number</label>
                                        <input type="text" class="form-input" placeholder="1234 5678 9012 3456" value="4242 4242 4242 4242">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Expiry Date</label>
                                        <input type="text" class="form-input" placeholder="MM/YY" value="12/25">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">CVV</label>
                                        <input type="text" class="form-input" placeholder="123" value="123">
                                    </div>
                                </div>
                            </div>

                            <!-- PayPal Fields (Hidden by default) -->
                            <div id="paypal-fields" class="payment-fields" style="display: none;">
                                <div class="form-grid">
                                    <div class="form-group full-width">
                                        <label class="form-label">PayPal Email</label>
                                        <input type="email" class="form-input" placeholder="your@email.com">
                                    </div>
                                    <div class="form-group full-width">
                                        <label class="form-label">PayPal Password</label>
                                        <input type="password" class="form-input" placeholder="Enter your PayPal password">
                                    </div>
                                </div>
                            </div>

                            <!-- Apple Pay Fields (Hidden by default) -->
                            <div id="apple-fields" class="payment-fields" style="display: none;">
                                <div class="form-grid">
                                    <div class="form-group full-width">
                                        <label class="form-label">Apple ID</label>
                                        <input type="email" class="form-input" placeholder="your.apple.id@email.com">
                                    </div>
                                    <div class="form-group full-width">
                                        <label class="form-label">Device Passcode</label>
                                        <input type="password" class="form-input" placeholder="Enter your device passcode">
                                    </div>
                                </div>
                            </div>

                            <!-- Google Pay Fields (Hidden by default) -->
                            <div id="google-fields" class="payment-fields" style="display: none;">
                                <div class="form-grid">
                                    <div class="form-group full-width">
                                        <label class="form-label">Google Account</label>
                                        <input type="email" class="form-input" placeholder="your.gmail@gmail.com">
                                    </div>
                                    <div class="form-group full-width">
                                        <label class="form-label">Google Password</label>
                                        <input type="password" class="form-input" placeholder="Enter your Google password">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-primary" onclick="confirmPaymentMethod()">
                                <i class="fas fa-check"></i>
                                Confirm Payment Method
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Order Summary -->
                <div class="order-summary">
                    <div class="summary-card">
                        <h2 class="summary-title">Order Summary</h2>
                        
                        <!-- Cart Items -->
                        <div class="cart-items" id="checkout-items">
                            <!-- Items will be populated by JavaScript -->
                        </div>

                        <!-- Promo Code -->
                        <div class="promo-section">
                            <div class="promo-input-group">
                                <input type="text" class="promo-input" placeholder="Enter promo code" id="promo-code">
                                <button class="promo-btn" onclick="applyPromo()">Apply</button>
                            </div>
                        </div>

                        <!-- Summary Details -->
                        <div class="summary-divider"></div>
                        <div class="summary-row">
                            <span class="summary-label">Subtotal</span>
                            <span class="summary-value" id="subtotal">$0.00</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Delivery Fee</span>
                            <span class="summary-value" id="delivery-fee">$2.99</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Tax</span>
                            <span class="summary-value" id="tax">$0.00</span>
                        </div>
                        <div class="summary-row" id="discount-row" style="display: none;">
                            <span class="summary-label">Discount</span>
                            <span class="summary-value" id="discount" style="color: var(--accent-color);">-$0.00</span>
                        </div>
                        
                        <div class="summary-total">
                            <span class="total-label">Total</span>
                            <span class="total-value" id="total">$0.00</span>
                        </div>

                        <!-- Place Order Button -->
                        <button class="place-order-btn" onclick="placeOrder()">
                            <i class="fas fa-lock"></i>
                            <span>Place Secure Order</span>
                        </button>

                        <!-- Order Timeline -->
                        <div class="order-timeline">
                            <h3 class="timeline-title">Estimated Timeline</h3>
                            <div class="timeline-item active">
                                <div class="timeline-icon">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="timeline-content">
                                    <div class="timeline-label">Order Confirmed</div>
                                    <div class="timeline-time">Immediately</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon">
                                    <i class="fas fa-utensils"></i>
                                </div>
                                <div class="timeline-content">
                                    <div class="timeline-label">Preparing Order</div>
                                    <div class="timeline-time">5-10 minutes</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon">
                                    <i class="fas fa-truck"></i>
                                </div>
                                <div class="timeline-content">
                                    <div class="timeline-label">On the Way</div>
                                    <div class="timeline-time">15-30 minutes</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon">
                                    <i class="fas fa-home"></i>
                                </div>
                                <div class="timeline-content">
                                    <div class="timeline-label">Delivered</div>
                                    <div class="timeline-time">30-45 minutes</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedDelivery = 'standard';
        let deliveryFee = 2.99;
        let discountAmount = 0;

        // Load cart items
        function loadCartItems() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const checkoutItems = document.getElementById('checkout-items');

            if (cart.length === 0) {
                checkoutItems.innerHTML = '<p style="text-align: center; color: var(--text-muted);">Your cart is empty</p>';
                return;
            }

            checkoutItems.innerHTML = cart.map(item => {
                // Calculate the correct price including extras
                const itemPrice = item.totalPrice || (item.price * item.quantity);
                const unitPrice = item.basePrice || item.price;
                
                // Display extras if any
                let extrasDisplay = '';
                if (item.extras && item.extras.length > 0) {
                    extrasDisplay = `
                        <div class="cart-item-extras" style="font-size: 0.875rem; color: var(--text-muted);">
                            Extras: ${item.extras.map(e => e.name).join(', ')}
                        </div>
                    `;
                }
                
                return `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}" class="cart-item-image" onerror="this.src='https://picsum.photos/seed/${item.name}/60/60'">
                        <div class="cart-item-details">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-quantity">Quantity: ${item.quantity}</div>
                            ${extrasDisplay}
                        </div>
                        <div class="cart-item-price">$${itemPrice.toFixed(2)}</div>
                    </div>
                `;
            }).join('');

            updateSummary();
        }

        // Update order summary
        function updateSummary() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const subtotal = cart.reduce((sum, item) => sum + (item.totalPrice || (item.price * item.quantity)), 0);
            const tax = subtotal * 0.08; // 8% tax
            const total = subtotal + deliveryFee + tax - discountAmount;

            document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('tax').textContent = `$${tax.toFixed(2)}`;
            document.getElementById('total').textContent = `$${total.toFixed(2)}`;
        }

        // Select delivery option
        function selectDelivery(element, type) {
            document.querySelectorAll('.delivery-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            
            selectedDelivery = type;
            
            // Update delivery fee
            switch(type) {
                case 'standard':
                    deliveryFee = 2.99;
                    break;
                case 'express':
                    deliveryFee = 5.99;
                    break;
                case 'pickup':
                    deliveryFee = 0;
                    break;
            }
            
            document.getElementById('delivery-fee').textContent = deliveryFee === 0 ? 'Free' : `$${deliveryFee.toFixed(2)}`;
            updateSummary();
        }

        // Confirm delivery option
        function confirmDeliveryOption() {
            const selectedDelivery = document.querySelector('.delivery-option.selected');
            
            if (!selectedDelivery) {
                showNotification('Please select a delivery option');
                return;
            }

            const deliveryType = selectedDelivery.getAttribute('onclick').match(/'([^']+)'/)[1];
            const deliveryText = selectedDelivery.querySelector('h4').textContent;
            
            // Save delivery option to localStorage
            const deliveryOption = {
                type: deliveryType,
                text: deliveryText
            };
            localStorage.setItem('deliveryOption', JSON.stringify(deliveryOption));

            showNotification('Delivery option saved successfully!');
        }

        // Select payment method
        function selectPayment(element, method) {
            document.querySelectorAll('.payment-method').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');

            // Hide all payment fields
            document.querySelectorAll('.payment-fields').forEach(fields => {
                fields.style.display = 'none';
            });

            // Show selected payment fields
            const fieldsId = method + '-fields';
            const selectedFields = document.getElementById(fieldsId);
            if (selectedFields) {
                selectedFields.style.display = 'block';
            }
        }

        // Confirm delivery information
        function confirmDeliveryInfo() {
            const firstName = document.querySelector('input[placeholder="John"]').value;
            const lastName = document.querySelector('input[placeholder="Doe"]').value;
            const email = document.querySelector('input[placeholder="john@example.com"]').value;
            const phone = document.querySelector('input[placeholder="+1 (555) 123-4567"]').value;
            const address = document.querySelector('input[placeholder="123 Main St, Apt 4B"]').value;
            const city = document.querySelector('input[placeholder="New York"]').value;
            const zipCode = document.querySelector('input[placeholder="10001"]').value;

            // Validate delivery information
            if (!firstName || !lastName || !email || !phone || !address || !city || !zipCode) {
                showNotification('Please fill in all delivery information fields');
                return;
            }

            // Save delivery information to localStorage
            const deliveryInfo = {
                firstName,
                lastName,
                email,
                phone,
                address,
                city,
                zipCode
            };
            localStorage.setItem('deliveryInfo', JSON.stringify(deliveryInfo));

            showNotification('Delivery information confirmed successfully!');
        }

        // Confirm payment method
        function confirmPaymentMethod() {
            const selectedPayment = document.querySelector('.payment-method.selected');
            
            if (!selectedPayment) {
                showNotification('Please select a payment method');
                return;
            }

            const paymentMethod = selectedPayment.getAttribute('onclick').match(/'([^']+)'/)[1];
            
            // Get payment details based on selected method
            let paymentDetails = {};
            let isValid = true;

            switch(paymentMethod) {
                case 'card':
                    const cardNumber = document.querySelector('#card-fields input[placeholder="1234 5678 9012 3456"]').value;
                    const expiryDate = document.querySelector('#card-fields input[placeholder="MM/YY"]').value;
                    const cvv = document.querySelector('#card-fields input[placeholder="123"]').value;

                    if (!cardNumber || !expiryDate || !cvv) {
                        showNotification('Please fill in all card details');
                        return;
                    }
                    paymentDetails = { cardNumber, expiryDate, cvv };
                    break;

                case 'paypal':
                    const paypalEmail = document.querySelector('#paypal-fields input[placeholder="your@email.com"]').value;
                    const paypalPassword = document.querySelector('#paypal-fields input[placeholder="Enter your PayPal password"]').value;

                    if (!paypalEmail || !paypalPassword) {
                        showNotification('Please fill in PayPal details');
                        return;
                    }
                    paymentDetails = { email: paypalEmail };
                    break;

                case 'apple':
                    const appleId = document.querySelector('#apple-fields input[placeholder="your.apple.id@email.com"]').value;
                    const applePasscode = document.querySelector('#apple-fields input[placeholder="Enter your device passcode"]').value;

                    if (!appleId || !applePasscode) {
                        showNotification('Please fill in Apple Pay details');
                        return;
                    }
                    paymentDetails = { appleId };
                    break;

                case 'google':
                    const googleAccount = document.querySelector('#google-fields input[placeholder="your.gmail@gmail.com"]').value;
                    const googlePassword = document.querySelector('#google-fields input[placeholder="Enter your Google password"]').value;

                    if (!googleAccount || !googlePassword) {
                        showNotification('Please fill in Google Pay details');
                        return;
                    }
                    paymentDetails = { account: googleAccount };
                    break;
            }

            // Save payment information to localStorage
            const paymentInfo = {
                method: paymentMethod,
                details: paymentDetails
            };
            localStorage.setItem('paymentInfo', JSON.stringify(paymentInfo));

            showNotification('Payment method confirmed successfully!');
        }

        // Apply promo code
        function applyPromo() {
            const promoCode = document.getElementById('promo-code').value.trim().toUpperCase();
            
            if (promoCode === 'SAVE10') {
                discountAmount = 5.00;
                document.getElementById('discount-row').style.display = 'flex';
                document.getElementById('discount').textContent = `-$${discountAmount.toFixed(2)}`;
                updateSummary();
                showNotification('Promo code applied successfully!');
            } else if (promoCode === 'FREESHIP') {
                deliveryFee = 0;
                document.getElementById('delivery-fee').textContent = 'Free';
                updateSummary();
                showNotification('Free shipping applied!');
            } else if (promoCode === '') {
                showNotification('Please enter a promo code');
            } else {
                showNotification('Invalid promo code');
            }
        }

        // Place order
        function placeOrder() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            
            if (cart.length === 0) {
                showNotification('Your cart is empty');
                return;
            }

            // Calculate order total including extras
            const subtotal = cart.reduce((sum, item) => sum + (item.totalPrice || (item.price * item.quantity)), 0);
            const total = subtotal + deliveryFee - discountAmount;

            // Create order
            const order = {
                id: Date.now(),
                items: cart,
                delivery: selectedDelivery,
                deliveryFee: deliveryFee,
                discount: discountAmount,
                subtotal: subtotal,
                total: total,
                status: 'confirmed',
                timestamp: new Date().toISOString(),
                estimatedDelivery: new Date(Date.now() + 30 * 60000).toISOString() // 30 minutes from now
            };

            // Save order to localStorage
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.push(order);
            localStorage.setItem('orders', JSON.stringify(orders));

            // Clear cart
            localStorage.removeItem('cart');

            // Show success message
            showNotification('Order placed successfully! Redirecting to order tracking...');

            // Redirect to order tracking
            setTimeout(() => {
                window.location.href = 'order-tracking.html';
            }, 2000);
        }

        // Show notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(255, 0, 110, 0.3);
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Add animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadCartItems();
            updateCartCount();
        });

        // Update cart count
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartCountElements = document.querySelectorAll('.cart-count');
            cartCountElements.forEach(element => {
                element.textContent = totalItems;
            });
        }
    </script>
</body>
</html>
